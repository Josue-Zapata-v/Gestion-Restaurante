<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Listado de Clientes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" th:href="@{/css/style-navbar.css}">
    <link rel="stylesheet" th:href="@{/css/style-dashboard.css}"> <link rel="stylesheet" th:href="@{/css/style-customer.css}"> </head>
<body>
<div th:replace="~{fragment/navbar :: navbar}"></div>
<div th:replace="~{fragment/navbar :: navbar}"></div>

<div class="main-content">
    <div class="customer-main-container">
        <h2 class="customer-header-title">
            <i class="bi bi-people-fill"></i>
            Clientes Registrados
        </h2>

        <a th:href="@{/customers/form}" class="btn btn-register-customer mb-4">
            <i class="bi bi-person-plus-fill me-2"></i>
            Registrar Cliente
        </a>

        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

        <div class="customer-table-card">
            <div class="table-responsive">
                <table class="table customer-table table-striped">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>DNI</th>
                        <th>Nombre Completo</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="customer : ${customers}">

                        <td th:text="${customer.idCustomer}"></td>
                        <td th:text="${customer.dni}"></td>
                        <td th:text="${customer.name} + ' ' + ${customer.lastname}"></td>

                        <td>
                            <span th:class="${customer.status} ? 'status-active' : 'status-inactive'"
                                  th:text="${customer.status} ? 'Activo' : 'Inactivo'">
                            </span>
                        </td>

                        <td>
                            <a th:href="@{/customers/form(id=${customer.idCustomer})}" class="btn btn-sm btn-action-edit">
                                <i class="bi bi-pencil-square"></i> Editar
                            </a>

                            <form th:action="@{/customers/state/{id}/{newState}(id=${customer.idCustomer}, newState=${!customer.status})}"
                                  method="post" style="display:inline;">
                                <button type="submit"
                                        class="btn btn-sm btn-sm-custom"
                                        th:classappend="${customer.status} ? 'btn-danger' : 'btn-success'"
                                        th:text="${customer.status} ? 'Desactivar' : 'Activar'">
                                </button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>
<script th:replace="~{fragment/navbar :: navbar-script}"></script>
<script th:replace="~{fragment/navbar :: navbar-script}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>